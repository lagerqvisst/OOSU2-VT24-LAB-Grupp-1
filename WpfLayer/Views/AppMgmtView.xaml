<Window x:Class="WpfLayer.Views.AppMgmtView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfLayer.Views" xmlns:viewmodels="clr-namespace:WpfLayer.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:AppMgmtViewModel}"
        mc:Ignorable="d"
        Title="AppMgmtView" Height="800" Width="1500">

    <DockPanel LastChildFill="True">
        <!--MENY START -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="Return to previous window" x:Name="menuSignout" Command="{Binding Path=DataContext.CloseWindowCmd, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"></MenuItem>

            </MenuItem>
        </Menu>
        <!--MENY SLUT -->

        <StatusBar DockPanel.Dock="Bottom">
            <TextBlock Text="{Binding StatusBarMessage}" FontStyle="Italic"></TextBlock>

        </StatusBar>
        <!--STATUS MESSAGE slut -->

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="20"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="20"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="20"/>
            </Grid.RowDefinitions>
        
            <StackPanel Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Orientation="Vertical" >
                <Label Content="Appointment overview" FontWeight="Bold" FontSize="12"></Label>
                <TextBlock Text="{Binding PatientName}" FontSize="10"></TextBlock>
                <TextBlock  Text="{Binding PatientId}" FontSize="10"></TextBlock>
                <TextBlock Text="{Binding AppId}" FontSize="10"></TextBlock>
                <TextBlock  Text="{Binding AppointmentReason}" FontSize="10"></TextBlock>
            </StackPanel>
            <Border Grid.Column="1" Grid.Row="2" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5,15,0,5" Width="Auto">

                <StackPanel Margin="0,15,0,30">
                    <Label Content="Add doctors note" FontWeight="Bold" />
                    <TextBox Name="txtBoxDoctorNote" Text="{Binding DoctorsNote, UpdateSourceTrigger=PropertyChanged}" FontSize="10" 
             Height="Auto" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" AcceptsReturn="True"/>
                    <Button Content="Add note" Width="100" Height="30" Margin="0,10,0,0" Background="LightGreen" x:Name="btnAddDoctorsNote" 
            HorizontalAlignment="Left" Command="{Binding Path=DataContext.MakeNoteCmd, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"/>
                </StackPanel>



            </Border>
            <Border Grid.Column="1" Grid.Row="3" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5,10,0,5" Width="Auto">
                <StackPanel   Margin="0,0,0,30">
                    <Label Content="Diagnosis" FontWeight="Bold"></Label>
                    <Label Content="Description of diagnosis" FontStyle="Italic" FontSize="10"></Label>
                    <TextBox Text="{Binding DiagnosisDescription,UpdateSourceTrigger=PropertyChanged}" FontSize="10" Height="40"></TextBox>
                    <Label Content="Treatment Suggestion" FontStyle="Italic" FontSize="10"></Label>
                    <TextBox Text="{Binding TreatmentSuggestion,UpdateSourceTrigger=PropertyChanged}" FontSize="10"  Height="40"></TextBox>
                    <Button Content="Add diagnosis" Width="100" Height="30" HorizontalAlignment="Left" Margin="0,10,0,0" Background="LightGreen"
         Command="{Binding Path=DataContext.MakeDiagnosisCmd,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"></Button>

                </StackPanel>
            </Border>

            <Border Grid.Column="3"  Grid.Row="4" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5,20,0,5" Width="350" HorizontalAlignment="Left">

                <StackPanel >

                    <Label Content="Create new prescriptions and view medical history" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center"></Label>
                    <Button   Content="Manage Prescriptions" Width="200" Height="40" Background="Bisque" HorizontalAlignment="Center" 
        Command="{Binding Path=DataContext.OpenPrescriptionMgmtCmd ,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"></Button>
                </StackPanel>

            </Border>


            <Label Grid.Column="3" Grid.Row="1" Content="Patient History" FontWeight="Bold"></Label>

            <Border  Grid.Column="3" Grid.Row="2" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5,0,0,5">
                <StackPanel>
                    <Button Content="Show expanded doctors note from selected appointment" Command="{Binding DataGridShowDoctorsNoteCmd}"  Width="180" FontSize="7" FontStyle="Italic" HorizontalAlignment="Left"  Padding="4" Background="Bisque" Margin="10,10"></Button>
                    <Button Content="Show expanded reason from selected appointment" Command="{Binding DataGridShowReasonCmd}"  Width="180" FontSize="7" FontStyle="Italic" HorizontalAlignment="Left"  Padding="4" Background="Beige" Margin="10,0,0,0"></Button>
                    <Label Content="Appointment history" FontWeight="SemiBold"></Label>
                    <DataGrid ItemsSource="{Binding patientAppointmentHistory}" SelectedItem="{Binding SelectedAppointment}" AutoGenerateColumns="False" >

                        <DataGrid.Columns>

                            <DataGridTextColumn Header="Appointment ID" Binding="{Binding appointmentId}" />
                            <DataGridTextColumn Header="Patient Name" Binding="{Binding patientName}" />
                            <DataGridTextColumn Header="Date" Binding="{Binding appointmentDate}" />
                            <DataGridTextColumn Header="Reason" Binding="{Binding appointmentReason}" />
                            <DataGridTextColumn Header="Doctor" Binding="{Binding doctorName}" />
                            <DataGridTextColumn Header="Note from doctor" Binding="{Binding doctorsNote}" />
                            <DataGridTextColumn Header="Scheduled by" Binding="{Binding receptionistName}" />


                        </DataGrid.Columns>


                    </DataGrid>
                </StackPanel>
            </Border>
            <Border Grid.Column="3" Grid.Row="3" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5,10,0,5" Width="Auto">
                <StackPanel >
                    <Label Content="Diagnosis and Treatment history" FontWeight="SemiBold"></Label>
                    <DataGrid ItemsSource="{Binding diagnosisHistory}" AutoGenerateColumns="False">

                        <DataGrid.Columns>
                            <!-- Exempel på en synlig kolumn -->
                            <DataGridTextColumn Header="Diagnosis ID" Binding="{Binding diagnosisId}" />
                            <DataGridTextColumn Header="Diagnosis Description" Binding="{Binding diagnosisDescription}" />
                            <DataGridTextColumn Header="Date of diagnosis" Binding="{Binding dateOfDiagnosis}" />
                            <DataGridTextColumn Header="Suggested Treatment" Binding="{Binding treatmentSuggestion}" />


                            <!-- Exempel på en kolumn med synlighet som kontrolleras dynamiskt -->
                        </DataGrid.Columns>

                    </DataGrid>
                </StackPanel>
            </Border>
            <Border Grid.Column="5" Grid.Row="2" BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="5" Margin="5,0,0,5" Width="300" >
                <StackPanel  Margin="5,0,0,5">
                    <Label Content="Schedule a new appointment" FontWeight="Bold"></Label>

                    <!-- DatePicker för att välja datum -->
                    <DatePicker SelectedDate="{Binding AppointmentDate, Mode=TwoWay}" DisplayDateStart="2022-01-01" DisplayDateEnd="2025-12-31" SelectedDateFormat="Short" Width="200" HorizontalAlignment="Left" />

                    <Label Content="Appointment reason" FontStyle="Italic" FontSize="10" Margin="0,5,0,5"></Label>
                    <TextBox Text="{Binding NewAppointmentReason, UpdateSourceTrigger=PropertyChanged}" FontSize="10" Height="40" Width="200" HorizontalAlignment="Left"></TextBox>

                    <Button Content="Schedule new appointment" Width="200" Height="40" Background="Cornsilk" HorizontalAlignment="Left" Margin="0,20,0,0" Padding="4"
                        Command="{Binding MakeNewAppointmentCmd}" />
                </StackPanel>
            </Border>



        </Grid>



    </DockPanel>

</Window>
